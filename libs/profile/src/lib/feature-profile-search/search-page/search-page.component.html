<app-profile-filters class="search-page__filters" />

<app-infinite-scroll
  class="search-page__scroll"
  scrollType="web-api"
  (scrollEnded)="loadNextPage()"
>
  <ul
    class="search-page__profiles-list"
    ngProjectAs="web-api"
  >
    @for (profile of profiles(); track profile.id; let last = $last) {
      <li class="search-page__profile-item">
        <app-profile-card [profile]="profile" />
      </li>

<!--      @if (last) {-->
<!--        @defer (on viewport) {-->
<!--          <app-infinite-scroll-trigger (loaded)="loadNextPage()" />-->
<!--        } @placeholder {-->
<!--          <div></div>-->
<!--        }-->
<!--      }-->
    }
  </ul>
</app-infinite-scroll>
